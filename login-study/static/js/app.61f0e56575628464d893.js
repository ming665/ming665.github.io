webpackJsonp([4],{"4PNB":function(t,e){},AkJA:function(t,e){},DG0N:function(t,e){},HgGt:function(t,e,n){t.exports=n.p+"static/img/miHoYo_Logo.451cbfd.png"},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),i=n("XyXX"),a={name:"app",data:function(){return{rootClass:i.a.memoryCache.get("rootMobileClass")}},beforeCreate:function(){this.$root.isMobile=!1,this.$root.environment="development"},watch:{$route:function(){this.$el.scrollTop=0}}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{class:this.rootClass,attrs:{id:"root"}},[e("router-view")],1)},staticRenderFns:[]},s=n("VU/8")(a,r,!1,null,null,null).exports,c=n("/ocq"),l={name:"login",data:function(){return{mihoyoLogo:n("HgGt"),tabList:[{text:this.$t("login.captachLogin"),value:"captach"},{text:this.$t("login.passwordLogin"),value:"password"}]}},beforeMounted:function(){i.a.removeLocalStorageCache("login_ticket"),i.a.removeLocalStorageCache("actionInfo"),i.a.removeLocalStorageCache("accountInfo")},methods:{onTabChange:function(t){this.$router.push("/login/"+t.value)}}},u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mhy-verify-body-container"},[n("div",{staticClass:"mhy-verify-container"},[n("img",{staticClass:"mihoyo-logo",attrs:{src:t.mihoyoLogo},on:{click:function(){t.$router.push("/")}}}),t._v(" "),n("router-view")],1)])},staticRenderFns:[]};var h=n("VU/8")(l,u,!1,function(t){n("yCRb")},null,null).exports,p=n("qvC7"),m={name:"login",data:function(){return{mihoyoLogo:n("HgGt"),tabList:[{text:this.$t("login.captachLogin"),value:"captcha"},{text:this.$t("login.passwordLogin"),value:"password"}]}},beforeMount:function(){i.a.removeLocalStorageCache("login_ticket"),i.a.removeLocalStorageCache("actionInfo"),i.a.removeLocalStorageCache("accountInfo")},methods:{onTabChange:function(t){this.$router.push("/login/"+t.value)},onLogin:function(t){var e=this,n=t;"/login/captcha"===this.$route.path?p.a.login_by_mobilecaptcha(n).then(function(t){var n=t.status,o=t.account_info,a=t.msg;if(1===n){var r=o.weblogin_token;i.a.setLocalStorageCache("login_ticket",r),i.a.setLocalStorageCache("accountInfo",o),e.$router.push("/")}else e.$toast({content:a})}):p.a.login_by_password(n).then(function(t){var n=t.status,o=t.account_info,a=t.msg;if(1===n){var r=o.weblogin_token;i.a.setLocalStorageCache("login_ticket",r),i.a.setLocalStorageCache("accountInfo",o),e.$router.push("/")}else e.$toast({content:a})})}}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mhy-login mhy-container-content"},[n("img",{staticClass:"mihoyo-logo",attrs:{src:t.mihoyoLogo},on:{click:function(){t.$router.push("/")}}}),t._v(" "),n("div",{staticClass:"tab-container"},[n("mhy-tabs",{staticClass:"login-tab",attrs:{tabList:t.tabList,activeIndex:"/login/captcha"===t.$route.path?0:1},on:{change:t.onTabChange}})],1),t._v(" "),n("router-view",{on:{submit:t.onLogin}})],1)},staticRenderFns:[]};var d=n("VU/8")(m,f,!1,function(t){n("AkJA")},null,null).exports,g="login",v={name:"captcha-login",data:function(){return{mobile:"",mobile_captcha:"",action_type:g}},methods:{onSubmit:function(){_.isEmpty(this.mobile_captcha)?this.$toast({content:this.$t("captchaRequire")}):this.$emit("submit",{mobile:this.mobile,mobile_captcha:this.mobile_captcha})}}},b={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("mhy-form",{ref:"form",on:{submit:t.onSubmit}},[n("mhy-form-input",{staticClass:"input-item",attrs:{placeholder:t.$t("mobile"),required:"",inputValidate:"mobile"},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}}),t._v(" "),n("mhy-form-input",{staticClass:"input-item",attrs:{placeholder:t.$t("captcha"),captcha:"",mobile:t.mobile,actionType:t.action_type},model:{value:t.mobile_captcha,callback:function(e){t.mobile_captcha=e},expression:"mobile_captcha"}}),t._v(" "),n("mhy-button",{staticClass:"login-btn",attrs:{block:"",type:"submit"}},[t._v(t._s(t.$t("login.signUp")))])],1)},staticRenderFns:[]};var y=n("VU/8")(v,b,!1,function(t){n("ZOBI")},null,null).exports,C=n("woOf"),$=n.n(C),w={name:"password-login",data:function(){return{account:"",password:"",mmt_key:""}},methods:{inputValidate:function(t){return function(e){return""===e?t:null}},onSubmit:function(){this.$emit("submit",$()({account:this.account,password:this.password,is_crypto:!0},{}))}}},S={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("mhy-form",{ref:"form",on:{submit:t.onSubmit}},[n("mhy-form-input",{staticClass:"input-item",attrs:{placeholder:t.$t("login.account"),required:""},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}}),t._v(" "),n("mhy-form-input",{staticClass:"input-item",attrs:{type:"password",placeholder:t.$t("password"),inputValidate:t.inputValidate(t.$t("mhyFormInput.passwordRequire")),required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),n("mhy-button",{staticClass:"login-btn",attrs:{block:"",type:"submit"}},[t._v(t._s(t.$t("login.signUp")))])],1)},staticRenderFns:[]};var x=n("VU/8")(w,S,!1,function(t){n("xiCp")},null,null).exports;o.a.use(c.a);var I=[{path:"/",redirect:"/account"},{path:"/account",component:function(){return n.e(0).then(n.bind(null,"HDBm"))},redirect:"/account/home",children:[{path:"home",component:function(){return n.e(1).then(n.bind(null,"4Wgz"))},meta:{title:"账号管理"}},{path:"game",component:function(){return n.e(2).then(n.bind(null,"3eXc"))},meta:{title:"账号管理"}}]},{path:"/verify",component:h,redirect:"/login",children:[{path:"/login",component:d,redirect:"/login/captcha",children:[{path:"captcha",component:y,meta:{title:"验证码登录"}},{path:"password",component:x,meta:{title:"密码登录"}}]}]}],L=new c.a({routes:I});L.beforeEach(function(t,e,n){(function(t,e,n){var o=i.a.getLocalStorageCache("login_ticket"),a=i.a.getLocalStorageCache("actionInfo");console.log(t.query),console.log(e.query),t.path.indexOf("/account/")>=0&&!o?n("/login"):t.path.indexOf("verify")>=0&&!a?n("/login"):0===t.matched.length?"/"!==e.path&&e.path?n(!1):n("/"):n()}).bind(o.a)(t,e,n)}),L.afterEach(function(t,e,n){(function(t,e,n){}).bind(o.a)(t,e,n)});var k=L,F=n("4C6m"),E=function(t,e,n){if("number"!=typeof t)return t;switch(e){case"split":return function(t){for(var e=[],n=t,o="";n>1e3;)e.push(n%1e3),n=Math.floor(n/1e3);for(e.push(n);e.length>0;)o+=e.pop()+",";return o.substr(0,o.length-1)}(t);case"byte":return function(t){var e=0;return t>=1e3&&t<1e6?{value:e=parseFloat(t/1024),unit:"KB",text:e+"KB"}:t>=1e6&&t<1e9?{value:e=parseFloat(t/1048576),unit:"MB",text:e+"MB"}:t>=1e9?{value:e=parseFloat(t/1073741824),unit:"GB",text:e+"GB"}:{value:t,unit:"B",text:t+"B"}}(t);case"percent":return function(t,e){var n=Math.round(100*t);return"fill"===e&&n<10&&(n="0"+n),n+"%"}(t,n);case"time":return function(t){var e=t/1e3/60/60,n=Math.floor(e),o=60*(e-n),i=Math.floor(o),a=60*(o-i),r=Math.floor(a);return{hour:n,minute:i,second:r,millisecond:1e3*(a-r)}}(t);default:return t>=1e3&&t<1e6?parseFloat((t/1e3).toFixed(n||2))+"K":t>=1e6||t<=-1e6?parseFloat((t/1e6).toFixed(n||2))+"M":t}},B={name:"mhy-tabs",props:{tabList:{type:Array,required:!0},flex:{type:Boolean,default:!0},activeIndex:{type:Number}},data:function(){return{tabIndex:0,lineWidth:0,lineleft:"",complete:!1}},computed:{active:{get:function(){return void 0!==this.activeIndex?this.activeIndex:this.tabIndex}}},mounted:function(){var t=this;this.setWidthLeft(),setTimeout(function(){return t.complete=!0})},methods:{setWidthLeft:function(t){var e=void 0===t?this.active:t;if(this.flex){var n=1/this.tabList.length;this.lineWidth=E(n,"percent"),this.lineleft=E(n*e,"percent")}else{var o=this.$ref["tabItem"+e][0];this.lineWidth=o.clientWidth+"px",this.lineleft=o.offsetLeft+"px"}},selectTab:function(t){this.tabIndex=t,this.$emit("update:activeIndex",t),this.$emit("change",this.tabList[t],t)}},watch:{active:function(t){this.setWidthLeft(t)}}},T={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mhy-tabs",class:t.flex?"tabs-flex":""},[t._l(t.tabList,function(e,o){return n("div",{key:o,ref:"tabItem"+o,refInFor:!0,staticClass:"tab-item",class:t.active===o?"active":"",on:{click:function(){t.selectTab(o)}}},[t._v("\n\t\t"+t._s(e.text)+"\n\t")])}),t._v(" "),n("i",{staticClass:"tab-active-line",class:t.complete?"transition":"",style:{left:t.lineleft,width:t.lineWidth}})],2)},staticRenderFns:[]};var A=n("VU/8")(B,T,!1,function(t){n("Vdar")},null,null).exports,q=n("+b6B"),M=n.n(q),V=null,R={name:"mhy-form-input",props:{placeholder:{type:String,default:""},type:{type:String,default:"text"},required:{type:Boolean,default:!1},inputValidate:{type:[String,Function],validator:function(t){return t instanceof Function||-1!==["mobile","email","password"].indexOf(t)}},value:{type:String,default:""},mobile:{type:String,default:""},validate:{type:Function},captcha:{type:Boolean,default:!1},action_type:{type:String}},inheritAttrs:!1,data:function(){return{isFocus:!1,blured:!1,countDown:60,isSend:!1,pwdStrength:"",captchaText:this.$t("mhyFormInput.captchaText"),errorText:null}},computed:{isError:{get:function(){return!(!this.errorText||!this.blured)}}},methods:{onInput:function(){"email"!==this.inputValidate&&"mobile"!==this.inputValidate||(this.$refs.input.value=this.$refs.input.value.trim());var t=this.$refs.input.value;this.$emit("input",t),this.errorText=this.validateInput(t)},onFocus:function(){this.isFocus=!0,this.$emit("focus",this.$event)},onBlur:function(){var t=this.$refs.input.value;this.isFocus=!1,this.blured=!0,this.errorText=this.validateInput(t),this.$emit("blur",this.$event),window.scrollTo&&window.scrollTo(0,0)},validateInput:function(t){var e=null;if(!this.required&&""===t)return null;if(this.inputValidate instanceof Function)e=this.inputValidate(t);else switch(this.inputValidate){case"mobile":""===t?e=this.$t("mhyFormInput.mobileRequired"):M.a.isMobilePhone(t,"zh-CN")||(e=this.$t("mhyFormInput.mobileError"));break;case"email":""===t?e=this.$t("mhyFormInput.emialRequire"):M.a.isEmail(t)||(e=this.$t("mhyFormInput.emailError"));case"password":""===t?e=this.$t("mhyFormInput.passwordRequire"):/^[a-zA-Z0-9`~i!@#$%^&*()\-_=+[\]{}\\|'";:,.<>/? ]{6,15}$/.test(t)||(e=t.length>15||t.length<6?this.$t("mhyFormInput.pwdLengthError"):this.$t("mhyFormInput.pwdError"));var n=0;switch([/[0-9]/,/[a-z]/,/[A-Z]/,/[`~i!@#$%^&*()\-_=+[\]{}\\|'";:,.<>/? ]/,/.{8,}/].forEach(function(e){e.test(t)&&(n+=1)}),n){case 1:case 2:this.pwdStrength="week";break;case 3:case 4:this.pwdStrength="normal";break;case 5:this.pwdStrength="strong";break;default:this.pwdStrength=""}break;default:e=""===t?this.$t("mhyFormInput.required"):null}return e},sendCaptcha:function(){var t=this;if(!this.isSend)if(M.a.isMobilePhone(this.mobile,"zh-CN")){var e=i.a.getLocalStorageCache("actionInfo");p.a.create_mobile_captcha({action_type:this.action_type,mobile:this.mobile,action_ticket:_.get(e,"action_ticket")}).then(function(e){var n=e.status,o=e.msg;1===n?(t.isSend=!0,t.captchaText=t.$t("mhyFormInput.isSend"),V=setInterval(function(){if(t.countDown<=0)return t.isSend=!1,t.captchaText=t.$t("mhyFormInput.captchaText"),t.countDown=60,clearInterval(V);t.countDown-=1,t.captchaText=t.$t("mhyFormInput.isSend")+" ("+t.countDown+"s)"},1e3)):t.$toast({content:o})})}else this.$toast({content:this.$t("mhyFormInput.sendCaptchaMsg")})}},beforeDestroy:function(){clearInterval(V)}},U={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mhy-form-input",class:t.isError?"input-error":""},[n("div",{staticClass:"input-container",class:t.isFocus?"focus":""},[n("input",{ref:"input",attrs:{type:t.type,vaule:t.value},on:{input:t.onInput,focus:t.onFocus,blur:t.onBlur}}),t._v(" "),t.captcha?n("div",{staticClass:"input-inner-btn",class:t.isSend?"disabled":"",attrs:{"click-upload":""},on:{click:t.sendCaptcha}},[t._v("\n\t\t\t"+t._s(t.captchaText)+"\n\t\t")]):t._e(),t._v(" "),n("div",{staticClass:"input-label",class:""===t.value?"":"label-at-top"},[t._v("\n\t\t\t"+t._s(t.placeholder)+"\n\t\t")])]),t._v(" "),t.isError?n("p",{staticClass:"error-text"},[n("mhy-icon",{attrs:{name:"closecircle"}}),t._v("\n\t\t"+t._s(t.errorText)+"\n\t")],1):t._e(),t._v(" "),!t.isError&&t.pwdStrength?n("p",{staticClass:"password-strength"},[n("span",{staticClass:"strength-title"},[t._v(t._s(t.$t("mhyFormInput.passwordStrength")))]),t._v(" "),n("span",{staticClass:"strength-bar",class:t.passwordStrength}),t._v(" "),n("span",{staticClass:"strength-text",class:t.passwordStrength},[t._v(t._s(t.$t("mhyFormInput."+t.passwordStrength)))])]):t._e()])},staticRenderFns:[]};var N=n("VU/8")(R,U,!1,function(t){n("O4fg")},null,null).exports,D={name:"mhy-button",props:{block:{type:Boolean,default:!1},buttonType:{type:String,default:"button"},to:{type:String},ghost:{type:Boolean,default:!1}},inheritAttrs:!1,methods:{getClasses:function(){return""+(this.ghost?" is-ghost":"")},onClick:function(){this.to&&this.$router.push(this.to)}}},H={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mhy-button",class:t.block?"is-block":""},["a"===t.buttonType?n("a",{class:t.getClasses,on:{click:t.onClick}},[t._t("default")],2):n("button",{class:t.getClasses,on:{click:t.onClick}},[t._t("default")],2)])},staticRenderFns:[]};var O=n("VU/8")(D,H,!1,function(t){n("eHNw")},null,null).exports,G={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("form",{on:{submit:function(e){t.onSubmit(e)}}},[t._t("default")],2)},staticRenderFns:[]};var W=n("VU/8")({name:"mhy-form",methods:{onSubmit:function(t){t&&t.preventDefault();var e=!1;this.$children.forEach(function(t){var n=t;if(n.constructor.options.name.indexOf("mhy-form-")>=0){n.onBlur();var o=n.$el.querySelector(".input-container input");o&&o.blur(),n.isError&&(e=!0,o&&o.foucs)}}),e||this.$emit("submit",t)}}},G,!1,function(t){n("4PNB")},null,null).exports,P={name:"mhy-toast",props:{duration:{type:Number,default:3e3},content:{type:String,default:""}},mounted:function(){var t=this;setTimeout(function(){t.$el.parentElement&&t.$el.parentElement.removeChild(t.$el),t.$destroy()},this.duration)}},X={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"mhy-toast"},[this._v("\n\t"+this._s(this.content)+"\n")])},staticRenderFns:[]},K=n("VU/8")(P,X,!1,null,null,null).exports,Q={name:"mhy-icon",props:{name:{type:String,required:!0}}},z={render:function(){var t=this.$createElement;return(this._self._c||t)("i",{staticClass:"anticon mhy-icon",class:"icon-"+this.name})},staticRenderFns:[]},J=n("VU/8")(Q,z,!1,null,null,null).exports,j={install:function(t,e){t.component(A.name,A),t.component(N.name,N),t.component(O.name,O),t.component(W.name,W),t.component(J.name,J)}},Z={install:function(t,e){t.prototype.$toast=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new(t.extend(K));$()(n,e),n.$mount();var o=document.querySelector(".mhy-toast");o&&o.parentElement.removeChild(o),document.body.appendChild(n.$el)}}},Y={install:function(t,e){var n=this;t.prototype.$loginByCookie=function(t){n.loginByCookie.bind(this)(t)}},loginByCookie:function(t){var e=this;p.a.login_by_password({}).then(function(n){var o=n.status,a=n.msg,r=n.account_info;if(1===o){var s=r.weblogin_token;i.a.setLocalStorageCache("login_ticket",s),i.a.setLocalStorageCache("accountInfo",r),t&&t(r)}else e.$router.push("/login"),e.$toast({content:a})})}};n("DG0N"),n("j1ja"),n("M4fF");var tt=n("v5o6"),et=n.n(tt),nt=n("TXmL");o.a.use(nt.a);var ot,it=new nt.a({locale:"zh-cn",messages:{"zh-cn":{login:{captachLogin:"验证码登录",passwordLogin:"密码登录"},home:{accountManagement:"账号管理",gameInfoManagement:"游戏信息与管理"},mhyFormInput:{captchaText:"获取验证码",isSend:"重新发送"}},en:{login:{captachLogin:"验证码登录！",passwordLogin:"密码登录"}}}});o.a.config.productionTip=!1,et.a.attach(document.body),function(t){t.use(j),t.use(Y),t.use(Z);var e=new F.JSEncrypt;e.setPublicKey("-----BEGIN PUBLIC KEY-----\n\t\tMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC8ygMKjJLSUpnfXqt8lRSAdDxA\n\t\tHWKi9GbTFkCbAjkRCR6VUakxxXLXHQUtPCizKcvNpuYqZ5bO8LEgpY7SL3JEdEI9\n\t\tOuMnZ6ToeHPfcHeS+EgN0oYmdQ49RB5wZkcBEFk80OBEAM6VhnE0IuHGkU5ko9oP\n\t\tHq3boEQ3Ej6r3T+UhQIDAQAB\n\t\t-----END PUBLIC KEY-----"),t.prototype.$RSAencrypt=e}(o.a),(ot=o.a).filter("filterA",function(t){return t||t.toLowerCase()}),ot.filter("filterB",function(t){return t||t.toUpperCase()}),new o.a({el:"#app",i18n:it,router:k,components:{App:s},template:"<App/>"})},O4fg:function(t,e){},Vdar:function(t,e){},XyXX:function(t,e,n){"use strict";var o=n("mvHQ"),i=n.n(o),a={};e.a={setLocalStorageCache:function(t,e){var n=window.localStorage,o=i()({timestamp:(new Date).getTime(),value:e});n.setItem(t,o)},getLocalStorageCache:function(t){var e=window.localStorage.getItem(t);return void 0===e||null===e?null:JSON.parse(e).value},removeLocalStorageCache:function(t){window.localStorage.removeItem(t)},getLocalStorageInfo:function(){var t=window.localStorage.getItem(key);if(void 0!==t)return JSON.parse(t)},memoryCache:{set:function(t,e){a[t]={timestamp:Date.now(),value:e}},get:function(t){return a[t]?a[t].value:null},remove:function(t){void 0!==a[t]&&delete a[t]},getInfo:function(t){return a[t]}}}},ZOBI:function(t,e){},eHNw:function(t,e){},qvC7:function(t,e,n){"use strict";var o=n("//Fk"),i=n.n(o),a=n("mtWM"),r=n.n(a),s=n("mw3O"),c=n.n(s),l=r.a.create({timeout:5e3});function u(t,e){return new i.a(function(n,o){l.get(t,e).then(function(t){n(t.data)}).catch(function(t){o(t.data)})})}function h(t,e,n){return new i.a(function(o,i){l.post(t,e,c.a.stringify(e),n).then(function(t){o(t.data)}).catch(function(t){i(t.data)})})}l.interceptors.request.use(function(t){return t},function(t){return i.a.reject(t)});e.a={login_by_password:function(){return h("/Api/login_by_password",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})},login_by_mobilecaptcha:function(){return h("/Api/login_by_mobilecaptcha",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})},logout:function(){return u("/Api/logout",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})},login_by_cookie:function(){return u("/Api/login_by_password",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})},create_mobile_captcha:function(){return h("/Api/create_mobile_captcha",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}}},xiCp:function(t,e){},yCRb:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.61f0e56575628464d893.js.map